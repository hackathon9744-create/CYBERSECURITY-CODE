<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CyberSec Intelligence — Dashboard</title>

  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    :root {
      --card-bg: rgba(255,255,255,0.06);
      --card-border: rgba(255,255,255,0.12);
      --glass-bg: rgba(10,12,18,0.55);
    }

    body {
      background: linear-gradient(180deg,#060b18,#081020,#050d1a);
      font-family: Inter, sans-serif;
      color: #e2e8f0;
    }

    .card {
      background: rgba(255,255,255,0.06);
      border: 1px solid rgba(255,255,255,0.10);
      backdrop-filter: blur(12px);
      border-radius: 18px;
      padding: 22px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.25);
    }

    .result-box {
      white-space: pre-wrap;
      background: rgba(255,255,255,0.05);
      border-radius: 14px;
      padding: 14px;
      border: 1px solid rgba(255,255,255,0.15);
      margin-top: 12px;
      display: none;
    }

    .muted { color: rgba(200,215,235,0.55); }

    .glass-header {
      backdrop-filter: blur(10px);
      background: rgba(10,12,20,0.55);
      border-bottom: 1px solid rgba(255,255,255,0.08);
    }
  </style>
</head>

<body>

<!-- HEADER -->
<header class="glass-header fixed top-0 left-0 right-0 z-50">
  <div class="max-w-5xl mx-auto px-4 py-4 flex items-center justify-between">
    <div class="flex items-center gap-3">
      <div style="width:44px;height:44px;border-radius:12px;background:linear-gradient(135deg,#7c3aed,#4f46e5);" class="flex items-center justify-center">
        <svg width="22" height="22" viewBox="0 0 24 24" fill="none">
          <path d="M12 2L20 7v6c0 5-4 9-8 9s-8-4-8-9V7l8-5z" fill="white" opacity="0.12"/>
          <path d="M12 3.3 5 7.9v5.5c0 4.3 3 7.8 7 7.8s7-3.5 7-7.8V7.9L12 3.3z"
            stroke="white" stroke-opacity="0.6" stroke-width="0.6" stroke-linecap="round"/>
        </svg>
      </div>
      <div>
        <div class="text-white text-xl font-semibold tracking-wide">CyberSec Intelligence</div>
        <div class="text-xs muted">AI-Powered Scam Detection</div>
      </div>
    </div>
  </div>
</header>

<!-- CONTENT -->
<main class="pt-28 pb-12">
  <div class="max-w-5xl mx-auto px-4">

    <!-- HERO -->
    <section class="mb-6">
      <div class="card">
        <h1 class="text-2xl lg:text-3xl font-bold">Detect phishing URLs & scam messages instantly.</h1>
        <p class="muted mt-2 max-w-2xl">
          Our hybrid ML + LLM engine analyzes suspicious URLs and text messages, detects impersonation,
          identifies fraud signals, and explains the reasoning clearly.
        </p>
      </div>
    </section>

    <!-- GRID -->
    <section class="grid grid-cols-1 lg:grid-cols-3 gap-6">

      <!-- LEFT — ANALYSIS PANELS -->
      <div class="lg:col-span-2 space-y-6">

        <!-- URL CHECK -->
        <div class="card">
          <h2 class="text-lg font-semibold mb-1">URL Fraud Check</h2>
          <p class="muted text-sm">Paste any suspicious URL below to verify authenticity.</p>

          <div class="mt-4 flex flex-col md:flex-row gap-3">
            <input
              id="urlInput"
              type="url"
              placeholder="https://secure-payments-update.xyz/login"
              class="flex-1 px-4 py-3 bg-transparent border border-white/10 rounded-lg text-white outline-none placeholder:muted"
            />

            <button
              id="analyzeUrlBtn"
              class="px-4 py-3 bg-gradient-to-r from-purple-600 to-indigo-600 rounded-lg font-semibold hover:opacity-90"
            >Check URL</button>
          </div>

          <div id="urlResult" class="result-box"></div>
        </div>

        <!-- TEXT CHECK -->
        <div class="card">
          <h2 class="text-lg font-semibold mb-1">Text / Scam Message Detection</h2>
          <p class="muted text-sm">Check SMS, WhatsApp messages, or emails for scam indicators.</p>

          <textarea
            id="textInput"
            rows="5"
            placeholder="Your KYC is pending. Update immediately at https://..."
            class="w-full mt-3 px-4 py-3 bg-transparent border border-white/10 rounded-lg text-white outline-none placeholder:muted"
          ></textarea>

          <div class="mt-4 flex gap-3">
            <button id="analyzeTextBtn"
              class="bg-teal-600 px-4 py-3 rounded-lg font-semibold hover:opacity-90">Analyze Text</button>

            <button id="sampleBtn"
              class="border border-white/10 px-4 py-3 rounded-lg text-sm muted">Sample Input</button>
          </div>

          <div id="textResult" class="result-box"></div>
        </div>

      </div>

      <!-- RIGHT — INFO CARDS -->
      <aside class="space-y-6">

        <div class="card">
          <h3 class="font-semibold">Recent Cyber Attacks</h3>
          <ul class="mt-3 list-disc ml-5 text-sm muted">
            <li>SolarWinds supply chain breach — 2020</li>
            <li>Facebook data leak — 2019</li>
            <li>JBS ransomware — 2021</li>
            <li>Global phishing wave — 2024</li>
          </ul>
        </div>

        <div class="card">
          <h3 class="font-semibold">Prevention Tips</h3>
          <ul class="mt-3 list-disc ml-5 text-sm muted">
            <li>Enable 2FA everywhere</li>
            <li>Verify sender identities</li>
            <li>Never trust unknown links</li>
            <li>Check domain spelling & TLD</li>
            <li>Report suspicious messages</li>
          </ul>
        </div>

      </aside>
    </section>

    <!-- FOOTER -->
    <footer class="mt-12 text-center text-gray-500 text-sm">
      © 2025 CyberSec Intelligence — Built for PKP Hackathon
    </footer>

  </div>
</main>


<!-- SCRIPT -->
<script>
  const API_BASE = "https://cybersecurity-code-1.onrender.com";

  function show(box, text, err=false){
    box.style.display = "block";
    box.innerText = text;
    box.style.borderColor = err ? "rgba(255,80,80,0.4)" : "rgba(255,255,255,0.15)";
  }
  function clearBox(box){ box.style.display="none"; }

  function format(out){
    if(!out) return "No output.";

    let lines = [];
    if(out.final_risk) lines.push("Risk: " + out.final_risk);
    if(out.final_score !== undefined) lines.push("Score: " + out.final_score);
    if(out.scam_type) lines.push("Scam: " + out.scam_type);

    if(out.explanation){
      lines.push("\nExplanation:");
      if(Array.isArray(out.explanation)){
        out.explanation.forEach(r => lines.push("- " + r));
      } else lines.push(out.explanation);
    }

    return lines.join("\n");
  }

  document.addEventListener("DOMContentLoaded", () => {

    // URL CHECK
    document.getElementById("analyzeUrlBtn").onclick = async () => {
      let box = document.getElementById("urlResult");
      clearBox(box);

      let url = document.getElementById("urlInput").value.trim();
      if(!url){ show(box, "Please enter a URL.", true); return; }

      show(box, "Analyzing URL...");

      try {
        let res = await fetch(API_BASE + "/analyze_url", {
          method:"POST",
          headers:{"Content-Type":"application/json"},
          body:JSON.stringify({ url })
        });

        let out = await res.json();
        show(box, format(out), out.final_risk === "High");
      } catch (err){
        show(box, "Server error analyzing URL.", true);
      }
    };

    // TEXT CHECK
    document.getElementById("analyzeTextBtn").onclick = async () => {
      let box = document.getElementById("textResult");
      clearBox(box);

      let text = document.getElementById("textInput").value.trim();
      if(!text){ show(box, "Please enter text.", true); return;}

      show(box, "Analyzing text...");

      try {
        let res = await fetch(API_BASE + "/analyze_message", {
          method:"POST",
          headers:{"Content-Type":"application/json"},
          body:JSON.stringify({ text })
        });

        let out = await res.json();
        show(box, format(out), out.final_risk === "High");
      } catch(err){
        show(box, "Server error analyzing text.", true);
      }
    };

    // SAMPLE
    document.getElementById("sampleBtn").onclick = () => {
      document.getElementById("textInput").value =
        "Your KYC is pending. Confirm immediately at https://upi-verify-update.top/login";
    };

  });
</script>

</body>
</html>

